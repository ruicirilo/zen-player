{"name":"zen.js","tagline":"Zen player","body":"\r\n\r\n/*\r\n *\r\n * ZEN - HTML5-CSS3 Audio Player\r\n * by @simurai (simurai.com)\r\n *\r\n * Most of this code by: @maboa (happyworm.com)\r\n * and: @quinnirill (niiden.com/jussi/)\r\n *\r\n */\r\n\r\n\r\n\r\n$(document).ready(function(){    \r\n\t\t\r\n  \tvar status = \"stop\";\r\n\tvar dragging = false;\r\n\t\r\n\r\n\t\r\n\t// init\r\n\t\r\n\tvar player = $(\"#zen .player\");\r\n\t\t\r\n\tplayer.jPlayer({\r\n\t\t\tready: function () {\r\n      \t\t$(this).jPlayer(\"setMedia\", {\r\n    \t\t\tmp3: \"http://storage-new.newjamendo.com/tracks/1039381_96.mp3\",\r\n\t\t\t\tmp3: \"http://storage-new.newjamendo.com/tracks/1045016_96.mp3\",\r\n        \t\tmp3: \"http://storage-new.newjamendo.com/tracks/1042147_96.mp3\"\r\n      \t\t});\r\n    \t},\r\n    \tswfPath: \"\",\r\n\t\tsupplied: \"m4a, mp3, oga\"         \r\n  \t});  \r\n\r\n\r\n\r\n\r\n\t\r\n\t// preload, update, end\r\n\t\r\n\tplayer.bind($.jPlayer.event.progress, function(event) {    \r\n\t\t\t\r\n\t\tvar audio = $('#zen audio').get(0);\r\n\t\tvar pc = 0;    \r\n\t\t\t\t\r\n\t\tif ((audio.buffered != undefined) && (audio.buffered.length != 0)) {\r\n\t\t \tpc = parseInt(((audio.buffered.end(0) / audio.duration) * 100), 10); \r\n\t\t  \tdisplayBuffered(pc);\r\n\t\t  \t//console.log(pc);\r\n\t\t  \tif(pc >= 99) {\r\n\t\t  \t\t//console.log(\"loaded\");\r\n\t\t  \t\t$('#zen .buffer').addClass(\"loaded\");\r\n\t\t  \t}  \r\n\t\t}        \r\n\t\t\r\n\t});\r\n\t\r\n\t//player.bind($.jPlayer.event.loadeddata, function(event) {    \r\n\t\t//$('#zen .buffer').addClass(\"loaded\");    \r\n\t//});\r\n\t\r\n\tplayer.bind($.jPlayer.event.timeupdate, function(event) { \r\n\t\tvar pc = event.jPlayer.status.currentPercentAbsolute;\r\n\t\tif (!dragging) { \r\n\t    \tdisplayProgress(pc);\r\n\t\t}\r\n\t});\r\n\t\r\n\tplayer.bind($.jPlayer.event.ended, function(event) {   \r\n\t\t$('#zen .circle').removeClass( \"rotate\" );\r\n\t\t$(\"#zen\").removeClass( \"play\" );\r\n\t\t$('#zen .progress').css({rotate: '0deg'});\r\n\t\tstatus = \"stop\";\r\n\t});\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t// play/pause\r\n\t\r\n\t$(\"#zen .button\").bind('mousedown', function() {\r\n\t\t// not sure if this can be done in a simpler way.\r\n\t\t// when you click on the edge of the play button, but button scales down and doesn't drigger the click,\r\n\t\t// so mouseleave is added to still catch it.\r\n\t\t$(this).bind('mouseleave', function() {\r\n\t\t\t$(this).unbind('mouseleave');\r\n\t\t\tonClick();\r\n\t\t});\r\n\t});\r\n\t\r\n\t$(\"#zen .button\").bind('mouseup', function() {\r\n\t\t$(this).unbind('mouseleave');\r\n\t\tonClick();\r\n\t});\r\n\t\r\n\t\r\n\tfunction onClick() {  \t\t\r\n                    \r\n        if(status != \"play\") {\r\n\t\t\tstatus = \"play\";\r\n\t\t\t$(\"#zen\").addClass( \"play\" );\r\n\t\t\tplayer.jPlayer(\"play\");\r\n\t\t} else {\r\n\t\t\t$('#zen .circle').removeClass( \"rotate\" );\r\n\t\t\t$(\"#zen\").removeClass( \"play\" );\r\n\t\t\tstatus = \"pause\";\r\n\t\t\tplayer.jPlayer(\"pause\");\r\n\t\t}\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t// draggin\r\n\t\r\n\tvar clickControl = $('#zen .drag');\r\n\t\r\n\tclickControl.grab({\r\n\t\tonstart: function(){\r\n\t\t\tdragging = true;\r\n\t\t\t$('#zen .button').css( \"pointer-events\", \"none\" );\r\n\t\t\t\r\n\t\t}, onmove: function(event){\r\n\t\t\tvar pc = getArcPc(event.position.x, event.position.y);\r\n\t\t\tplayer.jPlayer(\"playHead\", pc).jPlayer(\"play\");\r\n\t\t\tdisplayProgress(pc);\r\n\t\t\t\r\n\t\t}, onfinish: function(event){\r\n\t\t\tdragging = false;\r\n\t\t\tvar pc = getArcPc(event.position.x, event.position.y);\r\n\t\t\tplayer.jPlayer(\"playHead\", pc).jPlayer(\"play\");\r\n\t\t\t$('#zen .button').css( \"pointer-events\", \"auto\" );\r\n\t\t}\r\n\t});\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t// functions\r\n\t\r\n\tfunction displayProgress(pc) {\r\n\t\tvar degs = pc * 3.6+\"deg\"; \r\n\t\t$('#zen .progress').css({rotate: degs}); \t\t\r\n\t}\r\n\tfunction displayBuffered(pc) {\r\n\t\tvar degs = pc * 3.6+\"deg\"; \r\n\t\t$('#zen .buffer').css({rotate: degs}); \t\t\r\n\t}\r\n\t\r\n\tfunction getArcPc(pageX, pageY) { \r\n\t\tvar\tself\t= clickControl,\r\n\t\t\toffset\t= self.offset(),\r\n\t\t\tx\t= pageX - offset.left - self.width()/2,\r\n\t\t\ty\t= pageY - offset.top - self.height()/2,\r\n\t\t\ta\t= Math.atan2(y,x);  \r\n\t\t\t\r\n\t\t\tif (a > -1*Math.PI && a < -0.5*Math.PI) {\r\n\t\t   a = 2*Math.PI+a; \r\n\t\t} \r\n\r\n\t\t// a is now value between -0.5PI and 1.5PI \r\n\t\t// ready to be normalized and applied   \t\t\t\r\n\t\tvar pc = (a + Math.PI/2) / 2*Math.PI * 10;   \r\n\t\t   \r\n\t\treturn pc;\r\n\t}\r\n\t\r\n\r\n\t\r\n\t\r\n});\r\n``","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}